<div class="textfonts">
  <app-navbar></app-navbar>

  <div class="container mb-4">
    <div class="row mb-4">

      <div class="login col-md-6 d-flex flex-column justify-content-center align-items-start p-5 mt-4">
        <h2 class="mb-2 fw-bold fs-1">Connectez-vous !</h2>
        <hr class="mb-4 border-4 border-primary w-25">
        <p class="mb-4 fs-4">
          Pour avoir accès à toutes les fonctionnalités de notre site, veuillez vous connecter. Si vous n’avez pas encore de compte, vous pouvez en créer un facilement.
        </p>
      </div>
      <div class="col-md-6 px-5 py-4 mt-4 bg-light">

        <ul class="nav nav-tabs mb-4 justify-content-center">
          <li class="nav-item w-50 text-center">
            <a class="nav-link fs-5" [class.active]="activeTab==='login'" (click)="setActiveTab('login')">Connexion</a>
          </li>
          <li class="nav-item w-50">
            <a class="nav-link fs-5 text-center" [class.active]="activeTab==='register'" (click)="setActiveTab('register')">Inscription</a>
          </li>
        </ul>

        <!-- LOGIN FORM -->
        <form *ngIf="activeTab==='login'" (ngSubmit)="login()" #loginForm="ngForm" class="login-form">
          <div class="mb-3">
            <label for="loginUsername" class="form-label fs-5 fw-bold">Nom d’utilisateur</label>
            <input id="loginUsername"
                   name="username"
                   type="text"
                   class="form-control border-0 border-bottom rounded-4 p-3 fs-5"
                   placeholder="Entrez votre nom d’utilisateur"
                   required
                   [(ngModel)]="credentials.username">
          </div>
          <div class="mb-3">
            <label for="loginPassword" class="form-label fs-5 fw-bold">Mot de passe</label>
            <input id="loginPassword"
                   name="password"
                   type="password"
                   class="form-control border-0 border-bottom rounded-4 p-3 fs-5"
                   placeholder="Entrez votre mot de passe"
                   required
                   [(ngModel)]="credentials.password">
          </div>
          <button type="submit"
                  class="btn btn-secondary px-5 py-2 fs-5"
                  [disabled]="!loginForm.form.valid || isSubmitting">
            {{ isSubmitting ? 'Connexion…' : 'Se connecter' }}
          </button>
        </form>

        <!-- REGISTER FORM -->
        <form *ngIf="activeTab==='register'" (ngSubmit)="register()" #registerForm="ngForm">
          <div class="mb-3">
            <label for="regUsername" class="form-label fs-5 fw-bold">Nom d’utilisateur</label>
            <input id="regUsername"
                   name="username"
                   type="text"
                   class="form-control border-0 border-bottom rounded-4 p-3 fs-5"
                   placeholder="Entrez votre nom d’utilisateur"
                   required
                   [(ngModel)]="user.username">
          </div>
          <div class="mb-3">
            <label for="regPassword" class="form-label fs-5 fw-bold">Mot de passe</label>
            <input id="regPassword"
                   name="password"
                   type="password"
                   class="form-control border-0 border-bottom rounded-4 p-3 fs-5"
                   placeholder="Entrez votre mot de passe"
                   required
                   [(ngModel)]="user.password">
          </div>
          <div class="mb-3">
            <label for="firstName" class="form-label fs-5 fw-bold">Prénom</label>
            <input id="firstName"
                   name="first_name"
                   type="text"
                   class="form-control border-0 border-bottom rounded-4 p-3 fs-5"
                   placeholder="Entrez votre prénom"
                   required
                   [(ngModel)]="user.first_name">
          </div>
          <div class="mb-3">
            <label for="lastName" class="form-label fs-5 fw-bold">Nom</label>
            <input id="lastName"
                   name="last_name"
                   type="text"
                   class="form-control border-0 border-bottom rounded-4 p-3 fs-5"
                   placeholder="Entrez votre nom"
                   required
                   [(ngModel)]="user.last_name">
          </div>
          <button type="submit"
                  class="btn btn-secondary px-5 py-2 fs-5"
                  [disabled]="!registerForm.form.valid || isSubmitting">
            {{ isSubmitting ? 'Inscription…' : 'S’inscrire' }}
          </button>
        </form>

      </div>
    </div>
  </div>

  <!-- Popup & Footer (unchanged) -->
  <div class="modal fade show d-block" *ngIf="popupMessage">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content text-center p-4 shadow rounded-4">
        <div class="modal-body">
          <h4 class="">{{ popupMessage }}</h4>
        </div>
      </div>
    </div>
  </div>

  <app-footer></app-footer>
</div>