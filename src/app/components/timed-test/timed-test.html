<app-navbar></app-navbar>

<div class="container mt-5">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center py-3 px-4 border-bottom flex-wrap gap-2">
    <div class="small text-secondary">
      Question {{ currentQuestionIndex + 1 }} de {{ questions.length }}
    </div>
    <app-test-timer [timeRemaining]="timeRemaining" [isUnlimited]="isUnlimitedMode"></app-test-timer>
  </div>

  <!-- Progress Bar -->
  <app-test-progress [current]="currentQuestionIndex" [total]="questions.length"></app-test-progress>

  <!-- Question Content -->
  @if (currentQuestion) {
    <div class="px-3">
      <app-question-card [question]="currentQuestion"></app-question-card>

      <!-- Navigation -->
      <div class="d-flex justify-content-between mb-4 gap-3">
        <button class="btn btn-light" (click)="previousQuestion()" [disabled]="currentQuestionIndex === 0">
          <i class="bi bi-chevron-left me-1"></i> Précédent
        </button>
        
        @if (currentQuestionIndex < questions.length - 1) {
          <button class="btn btn-primary" (click)="nextQuestion()">
            Suivant <i class="bi bi-chevron-right ms-1"></i>
          </button>
        } @else {
          <button class="btn btn-success" (click)="submitTest()">
            <i class="bi bi-check-lg me-1"></i> Soumettre
          </button>
        }
      </div>

      <!-- Question Navigator -->
      <app-question-navigator 
        [questions]="questions" 
        [currentIndex]="currentQuestionIndex"
        (navigate)="goToQuestion($event)">
      </app-question-navigator>
    </div>
  }
</div>
